[gd_scene load_steps=57 format=2]

[ext_resource path="res://Scenes/Fader.tscn" type="PackedScene" id=1]
[ext_resource path="res://Sprites/Haus/karma.png" type="Texture" id=2]
[ext_resource path="res://Sprites/Haus/karma_slider.png" type="Texture" id=3]
[ext_resource path="res://Sprites/Haus/sandclock_animation.png" type="Texture" id=4]
[ext_resource path="res://Sprites/Haus/background_main.png" type="Texture" id=5]
[ext_resource path="res://Scenes/ButtonMenuPrototype.tscn" type="PackedScene" id=6]
[ext_resource path="res://Sprites/Haus/menu_burger.png" type="Texture" id=7]
[ext_resource path="res://Scripts/ManaButton.gd" type="Script" id=8]
[ext_resource path="res://Font/SourceSerifPro-Regular.ttf" type="DynamicFontData" id=9]
[ext_resource path="res://Sprites/Haus/magic_ball.png" type="Texture" id=10]
[ext_resource path="res://Sprites/Haus/coin.png" type="Texture" id=11]
[ext_resource path="res://Scenes/Haus.gd" type="Script" id=12]
[ext_resource path="res://Scenes/Kotel.tscn" type="PackedScene" id=13]
[ext_resource path="res://Scripts/ClockSmoke.gd" type="Script" id=14]
[ext_resource path="res://Sprites/EventModule/board_dialog.png" type="Texture" id=15]
[ext_resource path="res://Scripts/Coin.gd" type="Script" id=16]
[ext_resource path="res://Sprites/Haus/sandclock_smoke_animation.png" type="Texture" id=17]
[ext_resource path="res://Sprites/Haus/coin_turning.png" type="Texture" id=18]
[ext_resource path="res://Scripts/Mana.gd" type="Script" id=19]
[ext_resource path="res://Scenes/MainMenu.tscn" type="PackedScene" id=20]
[ext_resource path="res://Scenes/LabelPrototype.tscn" type="PackedScene" id=21]
[ext_resource path="res://Scripts/Karma.gd" type="Script" id=22]
[ext_resource path="res://Scenes/ParallaxTable.tscn" type="PackedScene" id=23]
[ext_resource path="res://Sprites/EventModule/hand_up.png" type="Texture" id=24]
[ext_resource path="res://Sprites/EventModule/hand_down.png" type="Texture" id=25]
[ext_resource path="res://Scenes/LightIngrid.tscn" type="PackedScene" id=26]
[ext_resource path="res://Sprites/Haus/barrel.png" type="Texture" id=27]

[sub_resource type="AtlasTexture" id=1]
flags = 4
atlas = ExtResource( 4 )
region = Rect2( 0, 0, 280, 284 )

[sub_resource type="AtlasTexture" id=2]
flags = 4
atlas = ExtResource( 4 )
region = Rect2( 280, 0, 280, 284 )

[sub_resource type="AtlasTexture" id=3]
flags = 4
atlas = ExtResource( 4 )
region = Rect2( 560, 0, 280, 284 )

[sub_resource type="AtlasTexture" id=4]
flags = 4
atlas = ExtResource( 4 )
region = Rect2( 840, 0, 280, 284 )

[sub_resource type="AtlasTexture" id=5]
flags = 4
atlas = ExtResource( 4 )
region = Rect2( 1120, 0, 280, 284 )

[sub_resource type="AtlasTexture" id=6]
flags = 4
atlas = ExtResource( 4 )
region = Rect2( 1400, 0, 280, 284 )

[sub_resource type="AtlasTexture" id=7]
flags = 4
atlas = ExtResource( 4 )
region = Rect2( 1680, 0, 280, 284 )

[sub_resource type="SpriteFrames" id=8]
animations = [ {
"frames": [ SubResource( 1 ), SubResource( 2 ), SubResource( 3 ), SubResource( 4 ), SubResource( 5 ), SubResource( 6 ), SubResource( 7 ) ],
"loop": true,
"name": "tik",
"speed": 0.5
} ]

[sub_resource type="AtlasTexture" id=9]
flags = 4
atlas = ExtResource( 17 )
region = Rect2( 0, 0, 316, 362 )

[sub_resource type="AtlasTexture" id=10]
flags = 4
atlas = ExtResource( 17 )
region = Rect2( 316, 0, 316, 362 )

[sub_resource type="AtlasTexture" id=11]
flags = 4
atlas = ExtResource( 17 )
region = Rect2( 632, 0, 316, 362 )

[sub_resource type="AtlasTexture" id=12]
flags = 4
atlas = ExtResource( 17 )
region = Rect2( 948, 0, 316, 362 )

[sub_resource type="SpriteFrames" id=13]
animations = [ {
"frames": [ SubResource( 9 ), SubResource( 10 ), SubResource( 11 ), SubResource( 12 ) ],
"loop": true,
"name": "default",
"speed": 6.0
} ]

[sub_resource type="StyleBoxTexture" id=14]
texture = ExtResource( 2 )
region_rect = Rect2( 0, 0, 616, 176 )

[sub_resource type="StyleBoxEmpty" id=15]

[sub_resource type="StyleBoxEmpty" id=16]

[sub_resource type="AtlasTexture" id=17]
flags = 4
atlas = ExtResource( 18 )
region = Rect2( 0, 0, 290, 207 )

[sub_resource type="AtlasTexture" id=18]
flags = 4
atlas = ExtResource( 18 )
region = Rect2( 290, 0, 290, 207 )

[sub_resource type="AtlasTexture" id=19]
flags = 4
atlas = ExtResource( 18 )
region = Rect2( 580, 0, 290, 207 )

[sub_resource type="AtlasTexture" id=20]
flags = 4
atlas = ExtResource( 18 )
region = Rect2( 870, 0, 290, 207 )

[sub_resource type="AtlasTexture" id=21]
flags = 4
atlas = ExtResource( 18 )
region = Rect2( 1160, 0, 290, 207 )

[sub_resource type="AtlasTexture" id=22]
flags = 4
atlas = ExtResource( 18 )
region = Rect2( 1450, 0, 290, 207 )

[sub_resource type="SpriteFrames" id=23]
animations = [ {
"frames": [ ExtResource( 11 ) ],
"loop": true,
"name": "Idle",
"speed": 5.0
}, {
"frames": [ SubResource( 17 ), SubResource( 18 ), SubResource( 19 ), SubResource( 20 ), SubResource( 21 ), SubResource( 22 ) ],
"loop": true,
"name": "Move",
"speed": 8.0
} ]

[sub_resource type="DynamicFont" id=24]
size = 40
font_data = ExtResource( 9 )

[sub_resource type="StyleBoxEmpty" id=28]

[sub_resource type="StyleBoxEmpty" id=29]

[sub_resource type="Animation" id=25]
tracks/0/type = "value"
tracks/0/path = NodePath("..:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Color( 1, 1, 1, 0 ), Color( 1, 1, 1, 1 ) ]
}

[sub_resource type="Animation" id=26]
tracks/0/type = "value"
tracks/0/path = NodePath("..:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Color( 1, 1, 1, 1 ), Color( 1, 1, 1, 0 ) ]
}

[sub_resource type="DynamicFont" id=27]
size = 70
font_data = ExtResource( 9 )

[node name="Haus" type="TextureRect"]
pause_mode = 1
margin_right = 40.0
margin_bottom = 40.0
mouse_filter = 2
texture = ExtResource( 5 )
script = ExtResource( 12 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Barrel" type="Sprite" parent="."]
position = Vector2( 936.913, 1033.05 )
texture = ExtResource( 27 )

[node name="Gui" type="CanvasLayer" parent="."]

[node name="Clock" type="AnimatedSprite" parent="Gui"]
position = Vector2( 115.355, 155.424 )
frames = SubResource( 8 )
animation = "tik"

[node name="ClockSmoke" type="AnimatedSprite" parent="Gui/Clock"]
visible = false
position = Vector2( 1.99997, 1.3636 )
frames = SubResource( 13 )
frame = 1
script = ExtResource( 14 )

[node name="Karma" type="HSlider" parent="Gui"]
margin_left = 231.655
margin_top = 57.5438
margin_right = 847.655
margin_bottom = 245.544
custom_icons/grabber_disabled = ExtResource( 3 )
custom_styles/slider = SubResource( 14 )
custom_styles/grabber_area_highlight = SubResource( 15 )
custom_styles/grabber_area = SubResource( 16 )
max_value = 50.0
value = 25.0
editable = false
script = ExtResource( 22 )
__meta__ = {
"_edit_use_anchors_": true
}

[node name="TestLabel" parent="Gui/Karma" instance=ExtResource( 21 )]
margin_left = 192.0
margin_top = -40.0
margin_right = 406.0
margin_bottom = 29.0

[node name="Coin" type="AnimatedSprite" parent="Gui"]
position = Vector2( 116.868, 386.563 )
frames = SubResource( 23 )
animation = "Move"
script = ExtResource( 16 )

[node name="CoinText" type="Label" parent="Gui/Coin"]
margin_left = -74.0
margin_top = 80.0
margin_right = 75.0
margin_bottom = 152.0
custom_fonts/font = SubResource( 24 )
text = "11"
align = 1
valign = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Mana" type="ProgressBar" parent="Gui"]
margin_left = 909.091
margin_top = 758.364
margin_right = 1353.09
margin_bottom = 874.364
rect_rotation = -90.0
custom_styles/fg = SubResource( 28 )
custom_styles/bg = SubResource( 29 )
value = 100.0
percent_visible = false
script = ExtResource( 19 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ManaButton" parent="Gui/Mana" instance=ExtResource( 6 )]
margin_left = -65.2671
margin_top = -56.3002
margin_right = 130.733
margin_bottom = 179.7
rect_rotation = 90.0
rect_pivot_offset = Vector2( 100, 100 )
texture_normal = ExtResource( 10 )
script = ExtResource( 8 )

[node name="LightIngrid" parent="Gui/Mana/ManaButton" instance=ExtResource( 26 )]
position = Vector2( 89.8755, 106.165 )
color = Color( 0.87451, 0.686275, 0.333333, 1 )
energy = 2.0

[node name="TestLabel" parent="Gui/Mana" instance=ExtResource( 21 )]
margin_left = -113.057
margin_top = -71.2236
margin_right = 100.943
margin_bottom = -2.22363
rect_rotation = 90.0

[node name="MainMenu" parent="Gui" instance=ExtResource( 20 )]
pause_mode = 2
margin_top = -1931.59
margin_bottom = -11.59

[node name="ButtonMenu" parent="Gui" instance=ExtResource( 6 )]
pause_mode = 2
margin_left = 840.704
margin_top = 32.9628
margin_right = 1084.7
margin_bottom = 276.963
rect_pivot_offset = Vector2( 120, 120 )
texture_normal = ExtResource( 7 )

[node name="GuestPosition" type="Position2D" parent="."]
position = Vector2( -372.525, 885.069 )

[node name="CatPosition" type="Node2D" parent="."]

[node name="First" type="Position2D" parent="CatPosition"]
position = Vector2( -20, 1235 )

[node name="Second" type="Position2D" parent="CatPosition"]
position = Vector2( 283, 1237 )

[node name="Third" type="Position2D" parent="CatPosition"]
position = Vector2( 551, 1235 )

[node name="Fourth" type="Position2D" parent="CatPosition"]
position = Vector2( 827, 1234 )

[node name="Table" parent="." instance=ExtResource( 23 )]

[node name="Kotel" parent="." instance=ExtResource( 13 )]

[node name="TestLabel" parent="Kotel" instance=ExtResource( 21 )]
margin_top = 11.9999
margin_bottom = 80.9999

[node name="Fader" parent="." instance=ExtResource( 1 )]

[node name="AnimationPlayerIn" parent="Fader" index="0"]
anims/In = SubResource( 25 )

[node name="AnimationPlayerOut" parent="Fader" index="1"]
anims/Out = SubResource( 26 )

[node name="TimerNode" type="Node2D" parent="."]

[node name="PeasantTimer" type="Timer" parent="TimerNode"]
wait_time = 2.0
one_shot = true

[node name="CatTimer" type="Timer" parent="TimerNode"]
wait_time = 5.0
one_shot = true

[node name="Pause" type="CanvasLayer" parent="."]
pause_mode = 2

[node name="PauseNode" type="Node2D" parent="Pause"]
visible = false

[node name="PauseBoard" type="Sprite" parent="Pause/PauseNode"]
position = Vector2( 542.387, 889.994 )
texture = ExtResource( 15 )

[node name="Warning" type="Label" parent="Pause/PauseNode/PauseBoard"]
margin_left = -488.003
margin_top = -233.98
margin_right = 492.997
margin_bottom = -41.9797
custom_fonts/font = SubResource( 27 )
custom_colors/font_color = Color( 0.960784, 0.933333, 0.854902, 1 )
text = "Выйти в меню (Вы начнёте игру новой ведьмой)?"
align = 1
valign = 1
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Yes" parent="Pause/PauseNode" instance=ExtResource( 6 )]
margin_left = 713.194
margin_top = 881.004
margin_right = 916.194
margin_bottom = 1092.0
texture_normal = ExtResource( 24 )

[node name="No" parent="Pause/PauseNode" instance=ExtResource( 6 )]
margin_left = 170.807
margin_top = 888.991
margin_right = 373.807
margin_bottom = 1099.99
texture_normal = ExtResource( 25 )
[connection signal="animation_finished" from="Gui/Clock/ClockSmoke" to="Gui/Clock/ClockSmoke" method="_on_ClockSmoke_animation_finished"]
[connection signal="animation_finished" from="Gui/Coin" to="Gui/Coin" method="_on_Coin_animation_finished"]
[connection signal="pressed" from="Gui/Mana/ManaButton" to="Gui/Mana" method="_on_ManaButton_pressed"]
[connection signal="pressed" from="Gui/ButtonMenu" to="." method="_on_ButtonMenu_pressed"]
[connection signal="ThrowIntoKotel" from="Table" to="." method="_on_Table_ThrowIntoKotel"]
[connection signal="pressed" from="Kotel" to="." method="_on_Kotel_pressed"]
[connection signal="animation_finished" from="Fader/AnimationPlayerIn" to="." method="_on_AnimationPlayerIn_animation_finished"]
[connection signal="timeout" from="TimerNode/PeasantTimer" to="." method="_on_PeasantTimer_timeout"]
[connection signal="timeout" from="TimerNode/CatTimer" to="." method="_on_CatTimer_timeout"]
[connection signal="pressed" from="Pause/PauseNode/Yes" to="." method="_on_Yes_pressed"]
[connection signal="pressed" from="Pause/PauseNode/No" to="." method="_on_No_pressed"]

[editable path="Fader"]
